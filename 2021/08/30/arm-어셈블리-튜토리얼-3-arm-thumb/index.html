<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ARM 어셈블리 튜토리얼 (3) ARM & Thumb | 데구루루x2 놀이터</title><meta name=keywords content="ARM,Assembly,Tutorial"><meta name=description content="ARM 어셈블리 기본 내용"><meta name=author content="deguru22"><link rel=canonical href=https://deguru22.github.io/2021/08/30/arm-%EC%96%B4%EC%85%88%EB%B8%94%EB%A6%AC-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-3-arm-thumb/><link crossorigin=anonymous href=/assets/css/stylesheet.min.5e2b4101351c21e906f398ae96901791830f58d430f96f2659dab7eaef7b3cb7.css integrity="sha256-XitBATUcIekG85iulpAXkYMPWNQw+W8mWdq36u97PLc=" rel="preload stylesheet" as=style><link rel=preload href=/images/deguru22.jpg as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://deguru22.github.io/ico/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://deguru22.github.io/ico/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://deguru22.github.io/ico/favicon-32x32.png><link rel=apple-touch-icon href=https://deguru22.github.io/ico/apple-touch-icon.png><link rel=mask-icon href=https://deguru22.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.98.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-164568875-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="ARM 어셈블리 튜토리얼 (3) ARM & Thumb"><meta property="og:description" content="ARM 어셈블리 기본 내용"><meta property="og:type" content="article"><meta property="og:url" content="https://deguru22.github.io/2021/08/30/arm-%EC%96%B4%EC%85%88%EB%B8%94%EB%A6%AC-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-3-arm-thumb/"><meta property="og:image" content="https://deguru22.github.io/static/deguru22.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-30T22:08:12+09:00"><meta property="article:modified_time" content="2021-08-30T22:08:12+09:00"><meta property="og:site_name" content="데구루루x2 놀이터"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://deguru22.github.io/static/deguru22.jpg"><meta name=twitter:title content="ARM 어셈블리 튜토리얼 (3) ARM & Thumb"><meta name=twitter:description content="ARM 어셈블리 기본 내용"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://deguru22.github.io/posts/"},{"@type":"ListItem","position":2,"name":"ARM 어셈블리 튜토리얼 (3) ARM \u0026 Thumb","item":"https://deguru22.github.io/2021/08/30/arm-%EC%96%B4%EC%85%88%EB%B8%94%EB%A6%AC-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-3-arm-thumb/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ARM 어셈블리 튜토리얼 (3) ARM \u0026 Thumb","name":"ARM 어셈블리 튜토리얼 (3) ARM \u0026 Thumb","description":"ARM 어셈블리 기본 내용","keywords":["ARM","Assembly","Tutorial"],"articleBody":"ARM Assembly에 대해 공부하던 중 좋은 글이 있어 번역 하였다.\n출처: Azeria Labs (https://azeria-labs.com/writing-arm-assembly-part-3/)\n ARM은 실행하기 위해 두 개의 상태(Jazelle는 제외하도록 합니다)를 가지고 있습니다 - ARM과 Thumb 입니다. 이 상태들은 권한과는 관계가 없습니다. 예를들어 SVC 모드에서 실행되는 코드는 ARM 일 수도 Thumb일 수도 있습니다. 두 상태의 주요 다른 점은 명령어 셋입니다. ARM 상태일때는 명령어가 항상 32-bit 이지만, Thumb 상태의 명령어 셋은 16-bit 입니다(그러나 32-bit 일 수도 있습니다). 언제, 어떻게 Thumb를 쓰는지 아는 것이 ARM 익스플로잇 개발에 매우 중요합니다. ARM 쉘코드를 작성할 때 우리는 16-bit Thumb 명령어를 통해 NULL 바이트를 없앨 수 있습니다.\nARM의 호출 규약은 헷갈리는 것 이상이며, 모든 ARM 버전이 같은 Thumb 명령어 셋을 지원하지 않습니다. 어떤 부분에서는, ARM이 향상된 Thumb 명령어 세트(이름: Thumbv2)를 지원하며, 해당 명령어 셋은 32-bit Thumb 명령어 셋과 이전 버전에서 제공하지 않은 조건문 분기를 지원합니다. Thumb 상태에서 조건문 실행을 하기 위해서 it 명령어가 새로 추가되었습니다. 그렇지만, 이 명령이 이후 버전에서 삭제되면서 덜 복잡한 명령으로 변경되었습니다. ARM/Thumb 명령어 셋의 모든 변경사항을 알지는 못하지만, 솔직하게는 신경 쓰지 않습니다. 당신도 마찬가지 입니다. 너가 알아야 될 것은 당신이 목표로 하는 기기의 ARM 버전과 Thumb 서포트 여부를 통해 당신의 코드를 수정하는 것입니다. ARM Infocenter는 어떻게 하면 당신의 ARM 버전을 알 수 있는지 가이드를 제공하고 있습니다.\n위에서 이미 언급 했듯이, Thumb 버전은 여러개가 있습니다. 이름이 다른것은 각각의 차별점을 두기 위함입니다 (프로세서 자체는 언제나 Thumb로 불립니다.)\n Thumb-1 (16-bit 명령어): ARMv6 및 이전 아키텍쳐에서 사용 Thumb-2 (16-bit and 32-bit 명령어) Thumb-1을 확장하여 더 많은 명령어를 16-bit 혹은 32-bit 로 사용할 수 있게 함 (ARMv6T2, ARMv7) ThumbEE: 동적 생성 코드에 대응하기 위한 변경 및 추가 버전 (코드가 기기에 명령 실행 직전 혹은 동안에 컴파일됨)  ARM과 Thumb의 차이:\n 조건부 실행: 모든 ARM 명령어는 조건부 실행을 지원합니다. 일부 ARM 프로세서 버전은 Thumb에서도 조건부 실행을 IT 명령을 통해 지원합니다. 조건부 실행은 실행하는 명령어의 숫자를 줄이고 많은 자원이 드는 분기 명령을 줄임으로서 코드의 밀도를 높여줍니다. 32-bit ARM과 Thumb 명령어: 32-bit Thumb 명령은 명령어 뒤에 w 가 붙습니다. 배럴 시프터(barrel shifter)는 ARM 모드의 특이한 기능입니다. 이것은 여러 명령을 1개로 줄여줍니다. 예를 들어서 곱하기 명령 실행을 위해 레지스터를 2로 곱한 후 MOV로 결과를 저장하는 두 개의 명령어를 MOV 명령만 실행하고 MOV 내부에서 오른쪽으로 1 시프트 하여 곱할 수 있도록(MOV R1, R0, LSL#1; R1 = R0 * 2) 할 수 있습니다.  프로세서가 실행하는 상태 변경을 위해서는, 아래 둘 중 하나의 조건을 갖추어야 합니다.\n 분기 명령을 BX(분기 및 교환) 혹은 BLX(분기, 링크 그리고 교환) 명령을 사용할 수 있어야 하고 목적 레지스터의 가장 낮은 바이트(least-signifant-bit)가 1이여야 합니다. 오프셋에 1을 더하면 이 기준을 충족할 수 있습니다 (예: 0x5530 + 1). 이렇게 하면 비트 정렬(alignment) 문제가 생길 수 있다고 생각할 수 있지만, 명령어들이 이미 2바이트 혹은 4바이트로 정렬돼 있고 가장 낮은 바이트(least-significant-bit)는 프로세서가 무시하므로 문제가 되지 않습니다. 더욱 자세한 것은 Part 6. 조건 실행과 분기 를 통해 확인하세요. 우리는 CPSR에 T 비트가 설정돼 있으면 Thumb 모드임을 알 수 있습니다.  ARM 명령어 셋 소개 이 파트를 통해 ARM의 명령어 세트를 소개합니다. 이 파트를 통해서 어셈블리가 얼마나 작은 단위의 명령을 수행하는지 알아보고, 어떻게 그 명령어들이 연결되어 있고, 명령어들을 엮어서 사용하는 방법에 대해서 배웁니다.\n위에서 언급했듯이, 어셈블리 언어는 메인 블록을 만들기 위한 명령어 셋의 집합으로 이루어져 있습니다. ARM 명령어는 한개 혹은 두개의 피연산자를 아래 템플릿 형태로 가지고 있습니다.\nMNEMONIC{S}{condition} {Rd}, Operand1, Operand2 ARM 명령어 세트의 유연성으로 인해서, 필드 안의 모든 인자들이 사용되지는 않습니다. 그렇지만 템플릿은 아래와 같은 내용으로 각 필드를 정의하고 있습니다.\nMNEMONIC - 명령어의 별칭 {S} - (선택) 명령어 접미사. S가 기재되어 있다면 명령의 결과에 따라 조건 플래그가 업데이트 됩니다 {condition} - 명령어 실행을 위해 맞추어야 하는 조건 {Rd} - 명령 실행 결과를 저장할 레지스터 (도착지) Operand1 - 첫번째 인자값. 레지스터 혹은 값 직접 입력 Operand2 - 두번째 인자값(일수도 있고 아닐수도 있음). 직접 값 입력 혹은 레지스터 위의 값들 중 MNEMONIC, S, Rd, Operand1 는 고정돼 있지만 condition과 Operand2의 경우 상황에 따라 다르게 쓰일 수 있습니다. condition 필드가 CPSR 레지스터의 값을 기반으로 설정이 되기 때문입니다. Operand2는 유연한 인자값으로 불리는데, 우리가 이 값을 다양하게 쓸 수 있기 때문입니다. 직접 값으로 사용할 수도 있고, 레지스터나, 쉬프트 한 레지스터 값 등을 포함할 수 있습니다. 예를 들어 우리는 Operand2에 아래와 같은 표현을 사용할 수 있습니다.\n#123 - 값 직접 입력 Rx - Register x (R1, R2, R3, ...) Rx, ASR n - 레지스터 x를 오른쪽으로 n비트 만큼 산술 쉬프트 한 값 Rx, LSL n - 레지스터 x를 왼쪽으로 n비트 만큼 논리 쉬프트 한 값 Rx, LSR n - 레지스터 x를 오른쪽으로 n비트 만큼 논리 쉬프트 한 값 Rx, ROR n - 레지스터 x를 n비트 만큼 로테이션 한 값 Rx, RRX - 레지스터 x를 1비트만큼 확장하여 로테이션 한 값 단적으로 명령어들이 어떻게 다르게 생겼는지 아래의 예시를 통해 알아봅시다.\nADD R0, R1, R2 - R1과 R2를 더해서 R0에 저장 ADD R0, R1, #2 - R1과 2를 더해서 R0에 저장 MOVLE R0, #5 - 조건 LE(적거나 같음)이 충족하면 숫자 5를 R0으로 옮깁니다 MOV R0, R1, LSL #1 - R1을 오른쪽으로 1비트 만큼 논리 쉬프트 하여 R0에 저장 아래에서 간략한 명령어 종류 및 설명을 확인해 봅시다.\n   명령어 설명     MOV 데이터 이동   MVN 데이터 이동 및 부언 (negate; 0을 1로, 1을 0으로)   ADD 더하기   SUB 빼기   MUL 곱하기   LSL 논리 쉬프트 (왼쪽)   LSR 논리 쉬프트 (오른쪽)   ASR 산술 쉬프트 (오른쪽)   ROR 로테이션 (오른쪽)   CMP 비교   AND Bitwise AND   ORR Bitwise OR   EOR Bitwise XOR   LDR 불러오기   STR 저장하기   LDM 여러개 불러오기   STM 여러개 저장하기   PUSH 스택에 푸시   POP 스택에서 팝   B 분기   BL 링크 하며 분기   BX 교환 하며 분기   SWI/SVC 시스템 콜   BLX 링크 및 교환 하며 분기    ","wordCount":"873","inLanguage":"en","datePublished":"2021-08-30T22:08:12+09:00","dateModified":"2021-08-30T22:08:12+09:00","author":{"@type":"Person","name":"deguru22"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://deguru22.github.io/2021/08/30/arm-%EC%96%B4%EC%85%88%EB%B8%94%EB%A6%AC-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-3-arm-thumb/"},"publisher":{"@type":"Organization","name":"데구루루x2 놀이터","logo":{"@type":"ImageObject","url":"https://deguru22.github.io/ico/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://deguru22.github.io/ accesskey=h title="데구루루x2 놀이터 (Alt + H)"><img src=/images/deguru22.jpg alt=logo aria-label=logo height=35>데구루루x2 놀이터</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://deguru22.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://deguru22.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://deguru22.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://deguru22.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://deguru22.github.io/posts/>Posts</a></div><h1 class=post-title>ARM 어셈블리 튜토리얼 (3) ARM & Thumb</h1><div class=post-description>ARM 어셈블리 기본 내용</div><div class=post-meta>August 30, 2021&nbsp;·&nbsp;5 min&nbsp;·&nbsp;deguru22&nbsp;|&nbsp;<a href=https://github.com/deguru22/deguru22.github.io/content/posts/arm-assembly-3.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#arm-%eb%aa%85%eb%a0%b9%ec%96%b4-%ec%85%8b-%ec%86%8c%ea%b0%9c aria-label="ARM 명령어 셋 소개">ARM 명령어 셋 소개</a></li></ul></div></details></div><div class=post-content><p>ARM Assembly에 대해 공부하던 중 좋은 글이 있어 번역 하였다.</p><p>출처: Azeria Labs (<a href=https://azeria-labs.com/writing-arm-assembly-part-3/>https://azeria-labs.com/writing-arm-assembly-part-3/</a>)</p><hr><p>ARM은 실행하기 위해 두 개의 상태(Jazelle는 제외하도록 합니다)를 가지고 있습니다 - ARM과 Thumb 입니다. 이 상태들은 권한과는 관계가 없습니다. 예를들어 SVC 모드에서 실행되는 코드는 ARM 일 수도 Thumb일 수도 있습니다. 두 상태의 주요 다른 점은 명령어 셋입니다. ARM 상태일때는 명령어가 항상 32-bit 이지만, Thumb 상태의 명령어 셋은 16-bit 입니다(그러나 32-bit 일 수도 있습니다). <strong>언제, 어떻게 Thumb를 쓰는지 아는 것이 ARM 익스플로잇 개발에 매우 중요합니다. ARM 쉘코드를 작성할 때 우리는 16-bit Thumb 명령어를 통해 NULL 바이트를 없앨 수 있습니다.</strong></p><p>ARM의 호출 규약은 헷갈리는 것 이상이며, 모든 ARM 버전이 같은 Thumb 명령어 셋을 지원하지 않습니다. 어떤 부분에서는, ARM이 향상된 Thumb 명령어 세트(이름: Thumbv2)를 지원하며, 해당 명령어 셋은 32-bit Thumb 명령어 셋과 이전 버전에서 제공하지 않은 조건문 분기를 지원합니다. Thumb 상태에서 조건문 실행을 하기 위해서 <code>it</code> 명령어가 새로 추가되었습니다. 그렇지만, 이 명령이 이후 버전에서 삭제되면서 덜 복잡한 명령으로 변경되었습니다. ARM/Thumb 명령어 셋의 모든 변경사항을 알지는 못하지만, 솔직하게는 신경 쓰지 않습니다. 당신도 마찬가지 입니다. 너가 알아야 될 것은 당신이 목표로 하는 기기의 ARM 버전과 Thumb 서포트 여부를 통해 당신의 코드를 수정하는 것입니다. ARM Infocenter는 어떻게 하면 당신의 ARM 버전을 알 수 있는지 <a href=http://infocenter.arm.com/help/index.jsp>가이드</a>를 제공하고 있습니다.</p><p>위에서 이미 언급 했듯이, Thumb 버전은 여러개가 있습니다. 이름이 다른것은 각각의 차별점을 두기 위함입니다 (프로세서 자체는 언제나 Thumb로 불립니다.)</p><ul><li>Thumb-1 (16-bit 명령어): ARMv6 및 이전 아키텍쳐에서 사용</li><li>Thumb-2 (16-bit and 32-bit 명령어) Thumb-1을 확장하여 더 많은 명령어를 16-bit 혹은 32-bit 로 사용할 수 있게 함 (ARMv6T2, ARMv7)</li><li>ThumbEE: 동적 생성 코드에 대응하기 위한 변경 및 추가 버전 (코드가 기기에 명령 실행 직전 혹은 동안에 컴파일됨)</li></ul><p>ARM과 Thumb의 차이:</p><ul><li>조건부 실행: 모든 ARM 명령어는 조건부 실행을 지원합니다. 일부 ARM 프로세서 버전은 Thumb에서도 조건부 실행을 IT 명령을 통해 지원합니다. 조건부 실행은 실행하는 명령어의 숫자를 줄이고 많은 자원이 드는 분기 명령을 줄임으로서 코드의 밀도를 높여줍니다.</li><li>32-bit ARM과 Thumb 명령어: 32-bit Thumb 명령은 명령어 뒤에 w 가 붙습니다.</li><li>배럴 시프터(barrel shifter)는 ARM 모드의 특이한 기능입니다. 이것은 여러 명령을 1개로 줄여줍니다. 예를 들어서 곱하기 명령 실행을 위해 레지스터를 2로 곱한 후 MOV로 결과를 저장하는 두 개의 명령어를 MOV 명령만 실행하고 MOV 내부에서 오른쪽으로 1 시프트 하여 곱할 수 있도록(MOV R1, R0, LSL#1; R1 = R0 * 2) 할 수 있습니다.</li></ul><p>프로세서가 실행하는 상태 변경을 위해서는, 아래 둘 중 하나의 조건을 갖추어야 합니다.</p><ul><li>분기 명령을 BX(분기 및 교환) 혹은 BLX(분기, 링크 그리고 교환) 명령을 사용할 수 있어야 하고 목적 레지스터의 가장 낮은 바이트(least-signifant-bit)가 1이여야 합니다. 오프셋에 1을 더하면 이 기준을 충족할 수 있습니다 (예: 0x5530 + 1). 이렇게 하면 비트 정렬(alignment) 문제가 생길 수 있다고 생각할 수 있지만, 명령어들이 이미 2바이트 혹은 4바이트로 정렬돼 있고 가장 낮은 바이트(least-significant-bit)는 프로세서가 무시하므로 문제가 되지 않습니다. 더욱 자세한 것은 Part 6. 조건 실행과 분기 를 통해 확인하세요.</li><li>우리는 CPSR에 T 비트가 설정돼 있으면 Thumb 모드임을 알 수 있습니다.</li></ul><h2 id=arm-명령어-셋-소개>ARM 명령어 셋 소개<a hidden class=anchor aria-hidden=true href=#arm-명령어-셋-소개>#</a></h2><p>이 파트를 통해 ARM의 명령어 세트를 소개합니다. 이 파트를 통해서 어셈블리가 얼마나 작은 단위의 명령을 수행하는지 알아보고, 어떻게 그 명령어들이 연결되어 있고, 명령어들을 엮어서 사용하는 방법에 대해서 배웁니다.</p><p>위에서 언급했듯이, 어셈블리 언어는 메인 블록을 만들기 위한 명령어 셋의 집합으로 이루어져 있습니다. ARM 명령어는 한개 혹은 두개의 피연산자를 아래 템플릿 형태로 가지고 있습니다.</p><pre tabindex=0><code>MNEMONIC{S}{condition} {Rd}, Operand1, Operand2
</code></pre><p>ARM 명령어 세트의 유연성으로 인해서, 필드 안의 모든 인자들이 사용되지는 않습니다. 그렇지만 템플릿은 아래와 같은 내용으로 각 필드를 정의하고 있습니다.</p><pre tabindex=0><code>MNEMONIC - 명령어의 별칭
{S} - (선택) 명령어 접미사. S가 기재되어 있다면 명령의 결과에 따라 조건 플래그가 업데이트 됩니다
{condition} - 명령어 실행을 위해 맞추어야 하는 조건
{Rd} - 명령 실행 결과를 저장할 레지스터 (도착지)
Operand1 - 첫번째 인자값. 레지스터 혹은 값 직접 입력
Operand2 - 두번째 인자값(일수도 있고 아닐수도 있음). 직접 값 입력 혹은 레지스터
</code></pre><p>위의 값들 중 MNEMONIC, S, Rd, Operand1 는 고정돼 있지만 condition과 Operand2의 경우 상황에 따라 다르게 쓰일 수 있습니다. condition 필드가 CPSR 레지스터의 값을 기반으로 설정이 되기 때문입니다. Operand2는 유연한 인자값으로 불리는데, 우리가 이 값을 다양하게 쓸 수 있기 때문입니다. 직접 값으로 사용할 수도 있고, 레지스터나, 쉬프트 한 레지스터 값 등을 포함할 수 있습니다. 예를 들어 우리는 Operand2에 아래와 같은 표현을 사용할 수 있습니다.</p><pre tabindex=0><code>#123 - 값 직접 입력
Rx - Register x (R1, R2, R3, ...)
Rx, ASR n - 레지스터 x를 오른쪽으로 n비트 만큼 산술 쉬프트 한 값
Rx, LSL n - 레지스터 x를 왼쪽으로 n비트 만큼 논리 쉬프트 한 값
Rx, LSR n - 레지스터 x를 오른쪽으로 n비트 만큼 논리 쉬프트 한 값
Rx, ROR n - 레지스터 x를 n비트 만큼 로테이션 한 값
Rx, RRX - 레지스터 x를 1비트만큼 확장하여 로테이션 한 값
</code></pre><p>단적으로 명령어들이 어떻게 다르게 생겼는지 아래의 예시를 통해 알아봅시다.</p><pre tabindex=0><code>ADD R0, R1, R2 - R1과 R2를 더해서 R0에 저장
ADD R0, R1, #2 - R1과 2를 더해서 R0에 저장
MOVLE R0, #5 - 조건 LE(적거나 같음)이 충족하면 숫자 5를 R0으로 옮깁니다
MOV R0, R1, LSL #1 - R1을 오른쪽으로 1비트 만큼 논리 쉬프트 하여 R0에 저장
</code></pre><p>아래에서 간략한 명령어 종류 및 설명을 확인해 봅시다.</p><table><thead><tr><th>명령어</th><th>설명</th></tr></thead><tbody><tr><td>MOV</td><td>데이터 이동</td></tr><tr><td>MVN</td><td>데이터 이동 및 부언 (negate; 0을 1로, 1을 0으로)</td></tr><tr><td>ADD</td><td>더하기</td></tr><tr><td>SUB</td><td>빼기</td></tr><tr><td>MUL</td><td>곱하기</td></tr><tr><td>LSL</td><td>논리 쉬프트 (왼쪽)</td></tr><tr><td>LSR</td><td>논리 쉬프트 (오른쪽)</td></tr><tr><td>ASR</td><td>산술 쉬프트 (오른쪽)</td></tr><tr><td>ROR</td><td>로테이션 (오른쪽)</td></tr><tr><td>CMP</td><td>비교</td></tr><tr><td>AND</td><td>Bitwise AND</td></tr><tr><td>ORR</td><td>Bitwise OR</td></tr><tr><td>EOR</td><td>Bitwise XOR</td></tr><tr><td>LDR</td><td>불러오기</td></tr><tr><td>STR</td><td>저장하기</td></tr><tr><td>LDM</td><td>여러개 불러오기</td></tr><tr><td>STM</td><td>여러개 저장하기</td></tr><tr><td>PUSH</td><td>스택에 푸시</td></tr><tr><td>POP</td><td>스택에서 팝</td></tr><tr><td>B</td><td>분기</td></tr><tr><td>BL</td><td>링크 하며 분기</td></tr><tr><td>BX</td><td>교환 하며 분기</td></tr><tr><td>SWI/SVC</td><td>시스템 콜</td></tr><tr><td>BLX</td><td>링크 및 교환 하며 분기</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://deguru22.github.io/tags/arm/>ARM</a></li><li><a href=https://deguru22.github.io/tags/assembly/>Assembly</a></li><li><a href=https://deguru22.github.io/tags/tutorial/>Tutorial</a></li></ul><nav class=paginav><a class=prev href=https://deguru22.github.io/2021/09/05/%EC%BB%A8%ED%94%8C%EB%A3%A8%EC%96%B8%EC%8A%A4-ognl-injection-rce-%EC%B7%A8%EC%95%BD%EC%A0%90-cve-2021-26084/><span class=title>« Prev Page</span><br><span>컨플루언스 OGNL Injection (RCE) 취약점 (CVE-2021-26084)</span></a>
<a class=next href=https://deguru22.github.io/2021/08/22/arm-%EC%96%B4%EC%85%88%EB%B8%94%EB%A6%AC-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-2-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85%EA%B3%BC-%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0/><span class=title>Next Page »</span><br><span>ARM 어셈블리 튜토리얼 (2) 데이터 타입과 레지스터</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on twitter" href="https://twitter.com/intent/tweet/?text=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb&url=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f&hashtags=ARM%2cAssembly%2cTutorial"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f&title=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb&summary=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb&source=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f&title=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on whatsapp" href="https://api.whatsapp.com/send?text=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb%20-%20https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share ARM 어셈블리 튜토리얼 (3) ARM & Thumb on telegram" href="https://telegram.me/share/url?text=ARM%20%ec%96%b4%ec%85%88%eb%b8%94%eb%a6%ac%20%ed%8a%9c%ed%86%a0%eb%a6%ac%ec%96%bc%20%283%29%20ARM%20%26%20Thumb&url=https%3a%2f%2fdeguru22.github.io%2f2021%2f08%2f30%2farm-%25EC%2596%25B4%25EC%2585%2588%25EB%25B8%2594%25EB%25A6%25AC-%25ED%258A%259C%25ED%2586%25A0%25EB%25A6%25AC%25EC%2596%25BC-3-arm-thumb%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=deguru22/deguru22.github.io issue-term=url label=comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://deguru22.github.io/>데구루루x2 놀이터</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>